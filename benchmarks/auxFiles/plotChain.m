function [] = plotChain( T,xTraj )
%plotChain does something.
%
%Inputs:
%  (tbd)
%
%Outputs:
%  (tbd)

% This file is part of the CAESAR MPC Suite developed at 
% ABB Corporate Research (CHCRC.C1).
% It is distributed under the terms of the Eclipse Public License v1.0,
% see the file LICENSE in the root directory.
%
% Authors:         Joachim Ferreau, Helfried Peyrl
% Last modified:   2/12/2014


    nMasses = 9;
    
    [nSteps,NX] = size( xTraj );
    x0 = [0,0,0]';
    
    %figure;
    
    for ii=1:nSteps
       
        plot3(  xTraj(ii,nMasses*3+1), ...
                xTraj(ii,nMasses*3+2), ...
                xTraj(ii,nMasses*3+3), ...
                'LineWidth',3, ...
                'Color',[0.5,0.5,0.5], ...
                'MarkerSize',10, ...
                'MarkerEdgeColor',[0.9,0.2,0.2], ...
                'MarkerFaceColor',[0.9,0.2,0.2], ...
                'Marker','o' ...
                );
        hold on;
        plot3(  [x0(1),xTraj(ii,1:3:(nMasses+1)*3)], ...
                [x0(2),xTraj(ii,2:3:(nMasses+1)*3)], ...
                [x0(3),xTraj(ii,3:3:(nMasses+1)*3)], ...
                'LineWidth',3, ...
                'Color',[0.5,0.5,0.5], ...
                'MarkerSize',10, ...
                'MarkerEdgeColor',[0.2,0.9,0.2], ...
                'MarkerFaceColor',[0.2,0.9,0.2], ...
                'Marker','o' ...
                );
        fill3(  [6 6 -1 -1],-0.2*ones(4,1),[3 -5 -5 3], ...
                [0.8,0.8,0.8] ...
                );
        hold off;
            
        title( num2str( T(ii),'%.1f s' ) );
        xlim( [-1 6] );
        ylim( [-1 4] );
        zlim( [-5 3] );
        grid on;
        %view(gca,[124.5 12]);
        view(gca,[92 12]);
        pause(0.1);
        
    end

end
